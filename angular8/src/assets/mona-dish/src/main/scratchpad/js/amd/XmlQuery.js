define((function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Config=e.ValueEmbedder=e.Optional=e.Monad=void 0;var u=n(3),l=n(2),s=n(1),c=u.Lang.objAssign,f=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t.prototype.map=function(e){return e||(e=function(t){return t}),new t(e(this.value))},t.prototype.flatMap=function(e){for(var n=this.map(e);(null==n?void 0:n.value)instanceof t;)n=n.value;return n},t}();e.Monad=f;var p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof f?this._value.flatMap().value:this._value},enumerable:!1,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.isAbsent=function(){return void 0===this.value||null==this.value},e.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},e.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},e.prototype.orElse=function(t){return this.isPresent()?this:null==t?e.absent:this.flatMap((function(){return t}))},e.prototype.orElseLazy=function(t){return this.isPresent()?this:this.flatMap(t)},e.prototype.flatMap=function(n){var r=t.prototype.flatMap.call(this,n);return r instanceof e?r.flatMap():e.fromNullable(r.value)},e.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++){var o=this.keyVal(t[r]),i=this.arrayIndex(t[r]);if(""===o&&i>=0){if((n=this.getClass().fromNullable(n.value instanceof Array?n.value.length<i?null:n.value[i]:null)).isAbsent())return n}else if(o&&i>=0){if(n.getIfPresent(o).isAbsent())return n;if((n=n.getIfPresent(o).value instanceof Array?this.getClass().fromNullable(n.getIfPresent(o).value[i]):this.getClass().absent).isAbsent())return n}else{if((n=n.getIfPresent(o)).isAbsent())return n;i>-1&&(n=this.getClass().fromNullable(n.value[i]))}}return n},e.prototype.match=function(t){return!this.isAbsent()&&t(this.value)},e.prototype.get=function(t){return void 0===t&&(t=e.absent),this.isAbsent()?this.getClass().fromNullable(t).flatMap():this.getClass().fromNullable(this.value).flatMap()},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.arrayIndex=function(t){var e=t.indexOf("["),n=t.indexOf("]");return e>=0&&n>0&&e<n?parseInt(t.substring(e+1,n)):-1},e.prototype.keyVal=function(t){var e=t.indexOf("[");return e>=0?t.substring(0,e):t},e.prototype.getIfPresent=function(t){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[t]).flatMap()},e.prototype.resolve=function(t){if(this.isAbsent())return e.absent;try{return e.fromNullable(t(this.value))}catch(t){return e.absent}},e.absent=e.fromNullable(null),e}(f);e.Optional=p;var h=function(t){function e(e,n){void 0===n&&(n="value");var r=t.call(this,e)||this;return r.key=n,r}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value?this._value[this.key]:null},set:function(t){this._value&&(this._value[this.key]=t)},enumerable:!1,configurable:!0}),e.prototype.orElse=function(t){var n={};return n[this.key]=t,this.isPresent()?this:new e(n,this.key)},e.prototype.orElseLazy=function(t){if(this.isPresent())return this;var n={};return n[this.key]=t(),new e(n,this.key)},e.prototype.getClass=function(){return e},e.fromNullable=function(t,n){return void 0===n&&(n="value"),new e(t,n)},e.absent=e.fromNullable(null),e}(p);e.ValueEmbedder=h;var v=function(t){function e(e,n,r){var o=t.call(this,e,n)||this;return o.arrPos=null!=r?r:-1,o}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return""==this.key&&this.arrPos>=0?this._value[this.arrPos]:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]:this._value[this.key]},set:function(t){""==this.key&&this.arrPos>=0?this._value[this.arrPos]=t:this.key&&this.arrPos>=0?this._value[this.key][this.arrPos]=t:this._value[this.key]=t},enumerable:!1,configurable:!0}),e.absent=e.fromNullable(null),e}(h),d=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"shallowCopy",{get:function(){return new e(s.Stream.ofAssoc(this.value).collect(new l.AssocArrayCollector))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deepCopy",{get:function(){return new e(c({},this.value))},enumerable:!1,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.shallowMerge=function(t,e,n){var r=this;void 0===e&&(e=!0),void 0===n&&(n=!1);var o=function(o){!e&&o in i.value||(n?Array.isArray(t.getIf(o).value)?s.Stream.of.apply(s.Stream,a(t.getIf(o).value)).each((function(t){return r.append(o).value=t})):i.append(o).value=t.getIf(o).value:i.assign(o).value=t.getIf(o).value)},i=this;for(var u in t.value)o(u)},e.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length<1;if(!n){var r=t[t.length-1],o=(this.keyVal(r),this.getIf.apply(this,a(t)).isPresent());this.buildPath(t);var i=this.arrayIndex(r);if(i>-1)throw Error("Append only possible on non array properties, use assign on indexed data");var u=this.getIf.apply(this,a(t)).value;Array.isArray(u)||(u=this.assign.apply(this,a(t)).value=[u]),o&&u.push({}),i=u.length-1;var l=new v(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,r,i);return l}},e.prototype.appendIf=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?this.append.apply(this,a(e)):{value:null}},e.prototype.assign=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t.length<1)){this.buildPath(t);var n=this.keyVal(t[t.length-1]),r=this.arrayIndex(t[t.length-1]),o=new v(1==t.length?this.value:this.getIf.apply(this,t.slice(0,t.length-1)).value,n,r);return o}},e.prototype.assignIf=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?this.assign.apply(this,a(e)):{value:null}},e.prototype.getIf=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.getClass().fromNullable(t.prototype.getIf.apply(this,e).value)},e.prototype.get=function(e){return this.getClass().fromNullable(t.prototype.get.call(this,e).value)},e.prototype.delete=function(t){return t in this.value&&delete this.value[t],this},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.setVal=function(t){this._value=t},e.prototype.buildPath=function(t){for(var e=this,n=this.getClass().fromNullable(null),r=-1,o=function(t,e){for(var n=t.length,r=n+e,o=n;o<r;o++)t.push({})},i=0;i<t.length;i++){var a=this.keyVal(t[i]),u=this.arrayIndex(t[i]);if(""===a&&u>=0)e.setVal(e.value instanceof Array?e.value:[]),o(e.value,u+1),r>=0&&(n.value[r]=e.value),n=e,r=u,e=this.getClass().fromNullable(e.value[u]);else{var l=e.getIf(a);if(-1==u)l.isAbsent()?l=this.getClass().fromNullable(e.value[a]={}):e=l;else{var s=l.value instanceof Array?l.value:[];o(s,u+1),e.value[a]=s,l=this.getClass().fromNullable(s[u])}n=e,r=u,e=l}}return this},e}(p);e.Config=d},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.LazyStream=e.Stream=void 0;var i=n(0),a=n(2),u=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._limits=-1,this.pos=-1,this.value=t}return t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,o([void 0],e)))},t.ofAssoc=function(t){return this.of.apply(this,o(Object.keys(t))).map((function(e){return[e,t[e]]}))},t.ofDataSource=function(e){for(var n=[];e.hasNext();)n.push(e.next());return new(t.bind.apply(t,o([void 0],n)))},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.of.apply(t,o([this],e)).flatMap((function(t){return t}))},t.prototype.onElem=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits)&&!1!==t(this.value[e],e);e++);return this},t.prototype.each=function(t){this.onElem(t)},t.prototype.map=function(e){e||(e=function(t){return t});var n=[];return this.each((function(t,r){n.push(e(t))})),new(t.bind.apply(t,o([void 0],n)))},t.prototype.flatMap=function(e){var n=[];return this.each((function(t){var r=e(t);n=Array.isArray(r)?n.concat(r):n.concat.apply(n,o(r.value))})),t.of.apply(t,o(n))},t.prototype.filter=function(e){var n=[];return this.each((function(t){e(t)&&n.push(t)})),new(t.bind.apply(t,o([void 0],n)))},t.prototype.reduce=function(t,e){void 0===e&&(e=null);for(var n=null!=e?0:1,r=null!=e?e:this.value.length?this.value[0]:null,o=n;o<this.value.length&&(-1==this._limits||o<this._limits);o++)r=t(r,this.value[o]);return i.Optional.fromNullable(r)},t.prototype.first=function(){return this.value&&this.value.length?i.Optional.fromNullable(this.value[0]):i.Optional.absent},t.prototype.last=function(){var t=this._limits>0?Math.min(this._limits,this.value.length):this.value.length;return i.Optional.fromNullable(t?this.value[t-1]:null)},t.prototype.anyMatch=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits);e++)if(t(this.value[e]))return!0;return!1},t.prototype.allMatch=function(t){if(!this.value.length)return!1;for(var e=0,n=0;n<this.value.length;n++)t(this.value[n])&&e++;return e==this.value.length},t.prototype.noneMatch=function(t){for(var e=0,n=0;n<this.value.length;n++)t(this.value[n])||e++;return e==this.value.length},t.prototype.sort=function(e){var n=this.value.slice().sort(e);return t.of.apply(t,o(n))},t.prototype.collect=function(t){return this.each((function(e){return t.collect(e)})),t.finalValue},t.prototype.hasNext=function(){var t=-1!=this._limits&&this.pos>=this._limits-1,e=this.pos>=this.value.length-1;return!(t||e)},t.prototype.next=function(){return this.hasNext()?(this.pos++,this.value[this.pos]):null},t.prototype.reset=function(){this.pos=-1},t}();e.Stream=u;var l=function(){function t(t){this._limits=-1,this.pos=-1,this.dataSource=t}return t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new(a.ArrayStreamDataSource.bind.apply(a.ArrayStreamDataSource,o([void 0],e))))},t.ofAssoc=function(t){return this.of.apply(this,o(Object.keys(t))).map((function(e){return[e,t[e]]}))},t.ofStreamDataSource=function(e){return new t(e)},t.prototype.hasNext=function(){return!this.isOverLimits()&&this.dataSource.hasNext()},t.prototype.next=function(){var t=this.dataSource.next();return this.pos++,t},t.prototype.reset=function(){this.dataSource.reset(),this.pos=0,this._limits=-1},t.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.of.apply(t,o([this],e)).flatMap((function(t){return t}))},t.prototype.nextFilter=function(t){if(this.hasNext()){var e=this.next();return t(e)?e:this.nextFilter(t)}return null},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.collect=function(t){for(;this.hasNext();){var e=this.next();t.collect(e)}return t.finalValue},t.prototype.onElem=function(e){var n=this;return new t(new a.MappedStreamDataSource((function(t){return!1===e(t,n.pos)&&n.stop(),t}),this))},t.prototype.filter=function(e){return new t(new a.FilteredStreamDatasource(e,this))},t.prototype.map=function(e){return new t(new a.MappedStreamDataSource(e,this))},t.prototype.flatMap=function(e){return new t(new a.FlatMapStreamDataSource(e,this))},t.prototype.each=function(t){for(;this.hasNext();)!1===t(this.next())&&this.stop()},t.prototype.reduce=function(t,e){if(void 0===e&&(e=null),!this.hasNext())return i.Optional.absent;var n=null,r=null;if(null!=e)n=e,r=this.next();else{if(n=this.next(),!this.hasNext())return i.Optional.fromNullable(n);r=this.next()}for(n=t(n,r);this.hasNext();)n=t(n,r=this.next());return i.Optional.fromNullable(n)},t.prototype.last=function(){return this.hasNext()?this.reduce((function(t,e){return e})):i.Optional.absent},t.prototype.first=function(){return this.reset(),this.hasNext()?i.Optional.fromNullable(this.next()):i.Optional.absent},t.prototype.anyMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!0;return!1},t.prototype.allMatch=function(t){for(;this.hasNext();)if(!t(this.next()))return!1;return!0},t.prototype.noneMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!1;return!0},t.prototype.sort=function(e){var n=this.collect(new a.ArrayCollector);return n=n.sort(e),t.of.apply(t,o(n))},Object.defineProperty(t.prototype,"value",{get:function(){return this.collect(new a.ArrayCollector)},enumerable:!1,configurable:!0}),t.prototype.stop=function(){this.pos=this._limits+1e9},t.prototype.isOverLimits=function(){return-1!=this._limits&&this.pos>=this._limits-1},t}();e.LazyStream=l},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFormStringCollector=e.QueryFormDataCollector=e.FormDataCollector=e.AssocArrayCollector=e.Run=e.ArrayCollector=e.FlatMapStreamDataSource=e.MappedStreamDataSource=e.FilteredStreamDatasource=e.ArrayStreamDataSource=e.SequenceDataSource=void 0;var i=n(1),a=function(){function t(t,e){this.total=e,this.start=t,this.value=t}return t.prototype.hasNext=function(){return this.value<this.total},t.prototype.next=function(){return Math.min(this.value++,this.total-1)},t.prototype.reset=function(){this.value=0},t}();e.SequenceDataSource=a;var u=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataPos=-1,this.value=t}return t.prototype.hasNext=function(){return this.value.length-1>this.dataPos},t.prototype.next=function(){return this.dataPos++,this.value[this.dataPos]},t.prototype.reset=function(){this.dataPos=-1},t}();e.ArrayStreamDataSource=u;var l=function(){function t(t,e){this.filteredNext=null,this.filterFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){for(;null==this.filteredNext&&this.inputDataSource.hasNext();){var t=this.inputDataSource.next();if(this.filterFunc(t))return this.filteredNext=t,!0;this.filteredNext=null}return null!=this.filteredNext},t.prototype.next=function(){var t=this.filteredNext;return this.filteredNext=null,this.hasNext(),t},t.prototype.reset=function(){this.filteredNext=null,this.inputDataSource.reset()},t}();e.FilteredStreamDatasource=l;var s=function(){function t(t,e){this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.inputDataSource.hasNext()},t.prototype.next=function(){return this.mapFunc(this.inputDataSource.next())},t.prototype.reset=function(){this.inputDataSource.reset()},t}();e.MappedStreamDataSource=s;var c=function(){function t(t,e){this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.resolveCurrentNext()||this.resolveNextNext()},t.prototype.resolveCurrentNext=function(){var t=!1;return this.activeDataSource&&(t=this.activeDataSource.hasNext()),t},t.prototype.resolveNextNext=function(){for(var t=!1;!t&&this.inputDataSource.hasNext();){var e=this.mapFunc(this.inputDataSource.next());Array.isArray(e)?this.activeDataSource=new(u.bind.apply(u,o([void 0],e))):this.activeDataSource=e,t=this.activeDataSource.hasNext()}return t},t.prototype.next=function(){return this.activeDataSource.next()},t.prototype.reset=function(){this.inputDataSource.reset()},t}();e.FlatMapStreamDataSource=c;var f=function(){function t(){this.data=[]}return t.prototype.collect=function(t){this.data.push(t)},Object.defineProperty(t.prototype,"finalValue",{get:function(){return this.data},enumerable:!1,configurable:!0}),t}();e.ArrayCollector=f;var p=function(){function t(){}return t.prototype.collect=function(t){},Object.defineProperty(t.prototype,"finalValue",{get:function(){return null},enumerable:!1,configurable:!0}),t}();e.Run=p;var h=function(){function t(){this.finalValue={}}return t.prototype.collect=function(t){var e,n;this.finalValue[null!==(e=t[0])&&void 0!==e?e:t]=null===(n=t[1])||void 0===n||n},t}();e.AssocArrayCollector=h;var v=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){this.finalValue.append(t.key,t.value)},t}();e.FormDataCollector=v;var d=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){var e=t.encodeFormElement();e.isPresent()&&this.finalValue.append(t.name.value,e.get(t.name).value)},t}();e.QueryFormDataCollector=d;var y=function(){function t(){this.formData=[]}return t.prototype.collect=function(t){var e=t.encodeFormElement();e.isPresent()&&this.formData.push([t.name.value,e.get(t.name).value])},Object.defineProperty(t.prototype,"finalValue",{get:function(){return i.Stream.of.apply(i.Stream,o(this.formData)).map((function(t){return t.join("=")})).reduce((function(t,e){return[t,e].join("&")})).orElse("").value},enumerable:!1,configurable:!0}),t}();e.QueryFormStringCollector=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lang=void 0;var r=n(0);!function(t){function e(t){for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--n)););return t.slice(0,n+1)}function n(t){return!!arguments.length&&null!=t&&("string"==typeof t||t instanceof String)}t.saveResolve=function(t,e){void 0===e&&(e=null);try{var n=t();return r.Optional.fromNullable(null!=n?n:e)}catch(t){return r.Optional.absent}},t.saveResolveLazy=function(t,e){void 0===e&&(e=null);try{var n=t();return r.Optional.fromNullable(null!=n?n:e())}catch(t){return r.Optional.absent}},t.strToArray=function(t,n){void 0===n&&(n=/\./gi);var r=[];return t.split(n).forEach((function(t){r.push(e(t))})),r},t.trim=e,t.objToArray=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=[]),"__undefined__"==(null!=t?t:"__undefined__")?null!=n?n:null:t instanceof Array&&!e&&!n?t:n.concat(Array.prototype.slice.call(t,e))},t.equalsIgnoreCase=function(t,e){var n=null!=e?e:"___no_value__";return(null!=t?t:"___no_value__").toLowerCase()===n.toLowerCase()},t.assertType=function(t,e){return n(e)?typeof t==e:t instanceof e},t.isString=n,t.isFunc=function(t){return t instanceof Function||"function"==typeof t},t.objAssign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return Object.assign?(e.forEach((function(t){return Object.assign(r,t)})),r):(e.filter((function(t){return null!=t})).forEach((function(t){var e=t;Object.keys(e).filter((function(t){return Object.prototype.hasOwnProperty.call(e,t)})).forEach((function(t){return r[t]=e[t]}))})),r)}}(e.Lang||(e.Lang={}))},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.DQ=e.DomQueryCollector=e.DomQuery=e.ElementAttribute=void 0;var l,s=n(0),c=n(1),f=n(3),p=f.Lang.trim,h=f.Lang.objToArray,v=f.Lang.isString,d=f.Lang.equalsIgnoreCase;!function(t){t.SELECT="select",t.BUTTON="button",t.SUBMIT="submit",t.RESET="reset",t.IMAGE="image",t.RADIO="radio",t.CHECKBOX="checkbox"}(l||(l={}));var y=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this,e,n)||this;return o.element=e,o.name=n,o.defaultVal=r,o}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){var t,e=(t=this.element.get(0)).orElse.apply(t,a([])).values;return e.length?e[0].getAttribute(this.name):this.defaultVal},set:function(t){for(var e,n=(e=this.element.get(0)).orElse.apply(e,a([])).values,r=0;r<n.length;r++)n[r].setAttribute(this.name,t);n[0].setAttribute(this.name,t)},enumerable:!1,configurable:!0}),e.prototype.getClass=function(){return e},e.fromNullable=function(t,n){return void 0===n&&(n="value"),new e(t,n)},e}(s.ValueEmbedder);e.ElementAttribute=y;var m=function(t){return-1==t.indexOf("ln=scripts")&&-1==t.indexOf("ln=javax.faces")||-1==t.indexOf("/jsf.js")&&-1==t.indexOf("/jsf-uncompressed.js")},b=function(){function t(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(this.rootNode=[],this.pos=-1,this._limits=-1,!s.Optional.fromNullable(n).isAbsent()&&n.length)for(var o=0;o<n.length;o++)if(v(n[o])){var i=t.querySelectorAll(n[o]);i.isAbsent()||n.push.apply(n,a(i.values))}else n[o]instanceof t?(e=this.rootNode).push.apply(e,a(n[o].values)):this.rootNode.push(n[o])}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getAsElem(0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.allElems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return new y(this.get(0),"id")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.rootNode.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.getAsElem(0).getIf("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.getAsElem(0).getIf("nodeName")},enumerable:!1,configurable:!0}),t.prototype.isTag=function(t){return!this.isAbsent()&&(this.nodeName.orElse("__none___").value.toLowerCase()==t.toLowerCase()||this.tagName.orElse("__none___").value.toLowerCase()==t.toLowerCase())},Object.defineProperty(t.prototype,"type",{get:function(){return this.getAsElem(0).getIf("type")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return new s.ValueEmbedder(this.getAsElem(0).value,"name")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this.getAsElem(0).getIf("value").isPresent()?new s.ValueEmbedder(this.getAsElem(0).value):s.ValueEmbedder.absent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return c.Stream.of.apply(c.Stream,a(this.values)).allMatch((function(t){return!!t.checked}))},set:function(t){this.eachElem((function(e){return e.checked=t}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){var t=this;return this.stream.flatMap((function(t){var e=t.value.value;return new c.Stream(e.elements?h(e.elements):[])})).filter((function(t){return!!t})).collect(new g).orElseLazy((function(){return t.querySelectorAll("input, select, textarea, fieldset")}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.attr("disabled").isPresent()},set:function(t){t?this.attr("disabled").value="disabled":this.removeAttribute("disabled")},enumerable:!1,configurable:!0}),t.prototype.removeAttribute=function(t){this.eachElem((function(e){return e.removeAttribute(t)}))},Object.defineProperty(t.prototype,"childNodes",{get:function(){var e=[];return this.eachElem((function(t){e=e.concat(h(t.childNodes))})),new(t.bind.apply(t,a([void 0],e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return new(c.Stream.bind.apply(c.Stream,a([void 0],this.asArray)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lazyStream",{get:function(){return c.LazyStream.ofStreamDataSource(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asArray",{get:function(){return[].concat(this.rootNode.filter((function(t){return null!=t})).map((function(e){return t.byId(e)})))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asNodeArray",{get:function(){return[].concat(this.rootNode.filter((function(t){return null!=t})))},enumerable:!1,configurable:!0}),t.querySelectorAll=function(e){return-1!=e.indexOf("/shadow/")?new t(document)._querySelectorAll(e):new t(document)._querySelectorAllDeep(e)},t.byId=function(e,n){return void 0===n&&(n=!1),v(e)?n?new t(document).byIdDeep(e):new t(document).byId(e):new t(e)},t.byTagName=function(e){return v(e)?new t(document).byTagName(e):new t(e)},t.globalEval=function(e,n){return new t(document).globalEval(e,n)},t.fromMarkup=function(e){var n=document.implementation.createHTMLDocument(""),r=(e=p(e)).toLowerCase();if(-1!=r.indexOf("<!doctype")||-1!=r.indexOf("<html")||-1!=r.indexOf("<head")||-1!=r.indexOf("<body"))return n.documentElement.innerHTML=e,new t(n.documentElement);var o=function(t,e){var n=["<",e,">"].join(""),r=["<",e," "].join("");return 0==t.indexOf(n)||0==t.indexOf(r)},i=new t(document.createElement("div"));return o(r,"thead")||o(r,"tbody")?(i.html("<table>"+e+"</table>"),i.querySelectorAll("table").get(0).childNodes.detach()):o(r,"tfoot")?(i.html("<table><thead></thead><tbody><tbody"+e+"</table>"),i.querySelectorAll("table").get(2).childNodes.detach()):o(r,"tr")?(i.html("<table><tbody>"+e+"</tbody></table>"),i.querySelectorAll("tbody").get(0).childNodes.detach()):o(r,"td")?(i.html("<table><tbody><tr>"+e+"</tr></tbody></table>"),i.querySelectorAll("tr").get(0).childNodes.detach()):(i.html(e),i.childNodes.detach())},t.prototype.get=function(e){return e<this.rootNode.length?new t(this.rootNode[e]):t.absent},t.prototype.getAsElem=function(t,e){return void 0===e&&(e=s.Optional.absent),t<this.rootNode.length?s.Optional.fromNullable(this.rootNode[t]):e},t.prototype.allElems=function(){return this.rootNode},t.prototype.isAbsent=function(){return 0==this.length},t.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},t.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},t.prototype.delete=function(){this.eachElem((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},t.prototype.querySelectorAll=function(t){return-1!=t.indexOf("/shadow/")?this._querySelectorAllDeep(t):this._querySelectorAll(t)},t.prototype._querySelectorAll=function(e){var n,r;if(!(null===(n=null==this?void 0:this.rootNode)||void 0===n?void 0:n.length))return this;for(var o=[],i=0;i<this.rootNode.length;i++)if(null===(r=this.rootNode[i])||void 0===r?void 0:r.querySelectorAll){var u=this.rootNode[i].querySelectorAll(e);o=o.concat(h(u))}return new(t.bind.apply(t,a([void 0],o)))},t.prototype._querySelectorAllDeep=function(e){var n;if(!(null===(n=null==this?void 0:this.rootNode)||void 0===n?void 0:n.length))return this;for(var r=new(t.bind.apply(t,a([void 0],this.rootNode))),o=e.split(/\/shadow\//),i=0;i<o.length;i++){var u=o[i];r=r.querySelectorAll(u),i<o.length-1&&(r=r.shadowRoot)}return r},t.prototype.byId=function(e,n){var r=[];return n&&(r=r.concat(((null==this?void 0:this.rootNode)||[]).filter((function(t){return e==t.id})).map((function(e){return new t(e)})))),r=r.concat(this.querySelectorAll('[id="'+e+'"]')),new(t.bind.apply(t,a([void 0],r)))},t.prototype.byIdDeep=function(e,n){var r=[];n&&(r=r.concat(((null==this?void 0:this.rootNode)||[]).filter((function(t){return e==t.id})).map((function(e){return new t(e)}))));var o=this;do{(o=null.querySelectorAll('[id="'+e+'"]')).length&&r.push(o),o=o.querySelectorAll("* /shadow/")}while(null==o?void 0:o.length);return new(t.bind.apply(t,a([void 0],r)))},t.prototype.byTagName=function(e,n){var r,o=[];return n&&(o=(null!==(r=null==this?void 0:this.rootNode)&&void 0!==r?r:[]).filter((function(t){return(null==t?void 0:t.tagName)==e})).reduce((function(t,e){return t.concat([e])}),o)),o=o.concat(this.querySelectorAll(e)),new(t.bind.apply(t,a([void 0],o)))},t.prototype.attr=function(t,e){return void 0===e&&(e=null),new y(this,t,e)},t.prototype.hasClass=function(t){var e=!1;return this.eachElem((function(n){if(e=n.classList.contains(t))return!1})),e},t.prototype.addClass=function(t){return this.eachElem((function(e){return e.classList.add(t)})),this},t.prototype.removeClass=function(t){return this.eachElem((function(e){return e.classList.remove(t)})),this},t.prototype.isMultipartCandidate=function(){return this.querySelectorAll("input[type='file']").firstElem().isPresent()},t.prototype.html=function(t){return s.Optional.fromNullable(t).isAbsent()?this.isPresent()?s.Optional.fromNullable(this.innerHtml):s.Optional.absent:(this.innerHtml=t,this)},t.prototype.dispatchEvent=function(t){return this.eachElem((function(e){return e.dispatchEvent(t)})),this},Object.defineProperty(t.prototype,"innerHtml",{get:function(){var t=[];return this.eachElem((function(e){return t.push(e.innerHTML)})),t.join("")},set:function(t){this.eachElem((function(e){return e.innerHTML=t}))},enumerable:!1,configurable:!0}),t.prototype._mozMatchesSelector=function(t,e){var n=t;return(n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(e){for(var n=(document||window.ownerDocument).querySelectorAll(e),r=n.length;--r>=0&&n.item(r)!==t;);return r>-1}).call(t,e)},t.prototype.filterSelector=function(e){var n=this,r=[];return this.eachElem((function(t){n._mozMatchesSelector(t,e)&&r.push(t)})),new(t.bind.apply(t,a([void 0],r)))},t.prototype.matchesSelector=function(t){var e=this;return this.eachElem((function(n){if(!e._mozMatchesSelector(n,t))return!1})),!0},t.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this.childNodes,r=0;r<t.length;r++)if((n=n.filterSelector(t[r])).isAbsent())return n;return n},t.prototype.eachElem=function(t){for(var e=0,n=this.rootNode.length;e<n&&!1!==t(this.rootNode[e],e);e++);return this},t.prototype.firstElem=function(t){return void 0===t&&(t=function(t){return t}),this.rootNode.length>1&&t(this.rootNode[0],0),this},t.prototype.each=function(e){return c.Stream.of.apply(c.Stream,a(this.rootNode)).each((function(n,r){if(null!=n)return e(t.byId(n),r)})),this},t.prototype.first=function(t){return void 0===t&&(t=function(t){return t}),this.rootNode.length>=1?(t(this.get(0),0),this.get(0)):this},t.prototype.filter=function(e){var n=[];return this.each((function(t){e(t)&&n.push(t)})),new(t.bind.apply(t,a([void 0],n)))},t.prototype.globalEval=function(t,e){var n=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");e&&r.setAttribute("nonce",e),r.type="text/javascript",r.innerHTML=t;var o=n.appendChild(r);return n.removeChild(o),this},t.prototype.detach=function(){return this.eachElem((function(t){t.parentNode.removeChild(t)})),this},t.prototype.appendTo=function(t){this.eachElem((function(e){t.getAsElem(0).orElseLazy((function(){return{appendChild:function(t){}}})).value.appendChild(e)}))},t.prototype.loadScriptEval=function(t,e,n){var r=this;void 0===e&&(e=0),void 0===n&&(n="utf-8");var o=new XMLHttpRequest;return o.open("GET",t,!1),n&&o.setRequestHeader("Content-Type","application/x-javascript; charset:"+n),o.send(null),o.onload=function(n){e?setTimeout((function(){r.globalEval(o.responseText+"\r\n//@ sourceURL="+t)}),e):r.globalEval(o.responseText.replace("\n","\r\n")+"\r\n//@ sourceURL="+t)},o.onerror=function(t){throw Error(t)},this},t.prototype.insertAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.each((function(t){for(var n=t.getAsElem(0).value,r=n.parentNode,o=function(t){var o=n.nextSibling;e[t].eachElem((function(t){o?(r.insertBefore(t,o),n=o):r.appendChild(t)}))},i=0;i<e.length;i++)o(i)}));var r=[];return r.push(this),r=r.concat(e),new(t.bind.apply(t,a([void 0],r)))},t.prototype.insertBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.each((function(t){for(var n=t.getAsElem(0).value,r=n.parentNode,o=0;o<e.length;o++)e[o].eachElem((function(t){r.insertBefore(t,n)}))}));var r=[];return r.push(this),r=r.concat(e),new(t.bind.apply(t,a([void 0],r)))},t.prototype.orElse=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.isPresent()?this:new(t.bind.apply(t,a([void 0],e)))},t.prototype.orElseLazy=function(e){return this.isPresent()?this:new t(e())},t.prototype.parents=function(e){var n=new Set,r=[],o=e.toLowerCase(),i=function(t){(t.tagName||"").toLowerCase()!=o||n.has(t)||(n.add(t),r.push(t))};return this.eachElem((function(t){for(;t.parentNode;)if(t=t.parentNode,i(t),"form"==e&&r.length)return!1})),new(t.bind.apply(t,a([void 0],r)))},t.prototype.copyAttrs=function(t){var e=this;return t.eachElem((function(t){var n,r,o=h(t.attributes);try{for(var i=u(o),a=i.next();!a.done;a=i.next()){var l=a.value,s=l.value,c=l.name;switch(c){case"id":e.id.value=s;break;case"disabled":e.resolveAttributeHolder("disabled").disabled=s;break;case"checked":e.resolveAttributeHolder("checked").checked=s;break;default:e.attr(c).value=s}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})),this},t.prototype.resolveAttributeHolder=function(t){void 0===t&&(t="value");var e=[];return e[t]=null,t in this.getAsElem(0).value?this.getAsElem(0).value:e},t.prototype.outerHTML=function(e,n,r,o){var i;if(void 0===o&&(o=!1),!this.isAbsent()){var u=null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.id,l=u?t.getCaretPosition(document.activeElement):null,s=t.fromMarkup(e),c=[],f=this.getAsElem(0).value,p=s.get(0),h=f.parentNode,v=p.getAsElem(0).value;if(h.replaceChild(v,f),c.push(new t(v)),this.isAbsent())return this;var d=[];s.length>1&&(d=d.concat.apply(d,a(s.values.slice(1))),c.push(t.byId(v).insertAfter(new(t.bind.apply(t,a([void 0],d)))))),n&&this.runScripts(),r&&this.runCss();var y=t.byId(u);return u&&y.isPresent()&&null!=l&&void 0!==l&&y.eachElem((function(e){return t.setCaretPosition(e,l)})),s}},t.prototype.runScripts=function(e){var n=this;void 0===e&&(e=m);var r=[],o=d,i=function(t){var i=t.tagName,a=t.type||"";if(i&&o(i,"script")&&(""===a||o(a,"text/javascript")||o(a,"javascript")||o(a,"text/ecmascript")||o(a,"ecmascript"))){var u=t.getAttribute("src");if(void 0!==u&&null!=u&&u.length>0)e(u)&&(r.length&&(n.globalEval(r.join("\n")),r=[]),n.loadScriptEval(u,0,"UTF-8"));else{for(var l=p(t.text||t.innerText||t.innerHTML),s=!0;s;)s=!1,"\x3c!--"==l.substring(0,4)&&(l=l.substring(4),s=!0),"//\x3c!--"==l.substring(0,4)&&(l=l.substring(6),s=!0),"//<![CDATA["==l.substring(0,11)&&(l=l.substring(11),s=!0);r.push(l)}}};try{new t(this.filterSelector("script"),this.querySelectorAll("script")).stream.flatMap((function(t){return c.Stream.of(t.values)})).sort((function(t,e){return t.compareDocumentPosition(e)-3})).each((function(t){return i(t)})),r.length&&this.globalEval(r.join("\n"))}catch(t){window.console&&window.console.error&&console.error(t.message||t.description)}finally{i=null}return this},t.prototype.runCss=function(){var e=function(t,e){var n,r,o,i,a=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(a);var u=null!==(n=a.sheet)&&void 0!==n?n:a.styleSheet;a.setAttribute("rel",null!==(r=t.getAttribute("rel"))&&void 0!==r?r:"stylesheet"),a.setAttribute("type",null!==(o=t.getAttribute("type"))&&void 0!==o?o:"text/css"),null!==(i=null==u?void 0:u.cssText)&&void 0!==i&&i?u.cssText=e:a.appendChild(document.createTextNode(e))};return new t(this.filterSelector("link, style"),this.querySelectorAll("link, style")).stream.flatMap((function(t){return c.Stream.of(t.values)})).sort((function(t,e){return t.compareDocumentPosition(e)-3})).each((function(t){return function(t){var n=t.tagName;if(n&&d(n,"link")&&d(t.getAttribute("type"),"text/css"))e(t,"@import url('"+t.getAttribute("href")+"');");else if(n&&d(n,"style")&&d(t.getAttribute("type"),"text/css")){var r=[],o=t.childNodes;o?o.forEach((function(t){return r.push(t.innerHTML||t.data)})):t.innerHTML&&r.push(t.innerHTML),e(t,r.join(""))}}(t)})),this},t.prototype.click=function(){return this.fireEvent("click"),this},t.prototype.addEventListener=function(t,e,n){return this.eachElem((function(r){return r.addEventListener(t,e,n)})),this},t.prototype.removeEventListener=function(t,e,n){return this.eachElem((function(r){return r.removeEventListener(t,e,n)})),this},t.prototype.fireEvent=function(t){this.eachElem((function(e){var n;if(e.ownerDocument)n=e.ownerDocument;else{if(9!=e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);n=e}if(e.dispatchEvent){var r="";switch(t){case"click":case"mousedown":case"mouseup":r="MouseEvents";break;case"focus":case"change":case"blur":case"select":r="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+t+"'."}var o=n.createEvent(r);o.initEvent(t,!0,!0),o.synthetic=!0,e.dispatchEvent(o)}else if(e.fireEvent){var i=n.createEventObject();i.synthetic=!0,e.fireEvent("on"+t,i)}}))},t.prototype.textContent=function(t){return void 0===t&&(t=""),this.stream.map((function(t){return t.getAsElem(0).orElseLazy((function(){return{textContent:""}})).value.textContent||""})).reduce((function(e,n){return e+t+n}),"").value},t.prototype.innerText=function(t){return void 0===t&&(t=""),this.stream.map((function(t){return t.getAsElem(0).orElseLazy((function(){return{innerText:""}})).value.innerText||""})).reduce((function(e,n){return[e,n].join(t)}),"").value},t.prototype.encodeFormElement=function(t){if(void 0===t&&(t=new s.Config({})),!this.name.isAbsent()){var e=t.shallowCopy;return this.each((function(t){if(!t.name.isAbsent()){var n=t.name.value,r=t.tagName.orElse("__none__").value.toLowerCase(),o=t.type.orElse("__none__").value.toLowerCase();if(o=o.toLowerCase(),("input"==r||"textarea"==r||"select"==r)&&null!=n&&""!=n&&!t.disabled){if("select"==r){var i=t.getAsElem(0).value;if(i.selectedIndex>=0)for(var a=i.options.length,u=0;u<a;u++)if(i.options[u].selected){var s=i.options[u];e.append(n).value=null!=s.getAttribute("value")?s.value:s.text}}if(r!=l.SELECT&&o!=l.BUTTON&&o!=l.RESET&&o!=l.SUBMIT&&o!=l.IMAGE&&(o!=l.CHECKBOX&&o!=l.RADIO||t.checked)){var c=t.value.files;(null==c?void 0:c.length)?e.append(n).value=c[0]:e.append(n).value=t.inputValue.value}}}})),e}},Object.defineProperty(t.prototype,"cDATAAsString",{get:function(){return this.lazyStream.flatMap((function(t){return t.childNodes.stream})).filter((function(t){var e,n;return 4==(null===(n=null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.value)||void 0===n?void 0:n.nodeType)})).reduce((function(t,e){var n,r,o;return t.push(null!==(o=null===(r=null===(n=null==e?void 0:e.value)||void 0===n?void 0:n.value)||void 0===r?void 0:r.data)&&void 0!==o?o:""),t}),[]).value.join("")},enumerable:!1,configurable:!0}),t.prototype.subNodes=function(e,n){return s.Optional.fromNullable(n).isAbsent()&&(n=this.length),new(t.bind.apply(t,a([void 0],this.rootNode.slice(e,Math.min(n,this.length)))))},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.hasNext=function(){var t=-1!=this._limits&&this.pos>=this._limits-1,e=this.pos>=this.values.length-1;return!(t||e)},t.prototype.next=function(){return this.hasNext()?(this.pos++,new t(this.values[this.pos])):null},t.prototype.reset=function(){this.pos=-1},t.prototype.attachShadow=function(e){void 0===e&&(e={mode:"open"});var n=[];return this.eachElem((function(r){var o,i;if(!(null===(o=r)||void 0===o?void 0:o.attachShadow))throw new Error("Shadow dom creation not supported by the browser, please use a shim, to gain this functionality");i=t.byId(r.attachShadow(e)),n.push(i)})),new(t.bind.apply(t,a([void 0],n)))},Object.defineProperty(t.prototype,"shadowElements",{get:function(){var e=(this.querySelectorAll("*").filter((function(t){return t.hasShadow})).allElems()||[]).map((function(t){return t.shadowRoot}));return new(t.bind.apply(t,a([void 0],e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowRoot",{get:function(){for(var e=[],n=0;n<this.rootNode.length;n++)this.rootNode[n].shadowRoot&&e.push(this.rootNode[n].shadowRoot);return new(t.bind.apply(t,a([void 0],e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasShadow",{get:function(){for(var t=0;t<this.rootNode.length;t++)if(this.rootNode[t].shadowRoot)return!0;return!1},enumerable:!1,configurable:!0}),t.getCaretPosition=function(t){var e,n=0;try{if(null===(e=document)||void 0===e?void 0:e.selection){t.focus();var r=document.selection.createRange();r.moveStart("character",-t.value.length),n=r.text.length}}catch(t){}return n},t.setCaretPosition=function(t,e){(null==t?void 0:t.focus)&&(null==t||t.focus()),(null==t?void 0:t.setSelectiongRange)&&(null==t||t.setSelectiongRange(e,e))},t.absent=new t,t}();e.DomQuery=b;var g=function(){function t(){this.data=[]}return t.prototype.collect=function(t){this.data.push(t)},Object.defineProperty(t.prototype,"finalValue",{get:function(){return new(b.bind.apply(b,a([void 0],this.data)))},enumerable:!1,configurable:!0}),t}();e.DomQueryCollector=g,e.DQ=b},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.XQ=e.XMLQuery=void 0;var i=n(3),a=n(4),u=i.Lang.isString,l=function(t){function e(e,n){void 0===n&&(n="text/xml");var r;return u(e)?t.call(this,null==(r=e)?null:i.Lang.saveResolveLazy((function(){return new window.DOMParser}),(function(){return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,{parseFromString:function(e,n){return t.loadXML(e)}};var t})).value.parseFromString(r,n))||this:t.call(this,e)||this}return o(e,t),e.prototype.isXMLParserError=function(){return this.querySelectorAll("parsererror").isPresent()},e.prototype.toString=function(){var t=[];return this.eachElem((function(e){var n,r,o,i,a=null!==(i=null===(o=null===(r=null===(n=window)||void 0===n?void 0:n.XMLSerializer)||void 0===r?void 0:r.constructor())||void 0===o?void 0:o.serializeToString(e))&&void 0!==i?i:null==e?void 0:e.xml;a&&t.push(a)})),t.join("")},e.prototype.parserErrorText=function(t){return this.querySelectorAll("parsererror").textContent(t)},e.parseXML=function(t){return new e(t)},e.parseHTML=function(t){return new e(t,"text/html")},e.fromString=function(t,n){return void 0===n&&(n="text/xml"),new e(t,n)},e}(a.DomQuery);e.XMLQuery=l,e.XQ=l}])}));
//# sourceMappingURL=XmlQuery.js.map